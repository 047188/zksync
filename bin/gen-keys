#!/bin/bash

. .setup_env

# HACK: We need to rebuild sources in case hardcoded values changed that might affect the keys
touch core/models/src/lib.rs

mkdir -p $ZKSYNC_HOME/$KEY_DIR/$BLOCK_SIZE_CHUNKS/$ACCOUNT_TREE_DEPTH
cargo run --bin key_generator --release

cp $ZKSYNC_HOME/$KEY_DIR/$BLOCK_SIZE_CHUNKS/$ACCOUNT_TREE_DEPTH/VerificationKey.sol $ZKSYNC_HOME/contracts/contracts
